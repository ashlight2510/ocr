<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ì‚¬ì§„ ê¸€ì ì¶”ì¶œ Â· íŒŒì¼ ì´ë¦„ ì¼ê´„ ë³€ê²½</title>

    <!-- SEO -->
    <meta
      name="description"
      content="ì‚¬ì§„ì—ì„œ ê¸€ì ì¶”ì¶œ(OCR) + íŒŒì¼ ì´ë¦„ ì¼ê´„ ë³€ê²½. ì„¤ì¹˜ ì—†ì´ ë¬´ë£Œë¡œ ë°”ë¡œ ì‚¬ìš©í•˜ì„¸ìš”."
    />
    <meta
      name="keywords"
      content="ì‚¬ì§„ ê¸€ì ì¶”ì¶œ, ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ë³€í™˜, OCR, íŒŒì¼ ì´ë¦„ ë³€ê²½, íŒŒì¼ëª… ì¼ê´„ ë³€ê²½"
    />

    <!-- OG -->
    <meta property="og:title" content="ì‚¬ì§„ ê¸€ì ì¶”ì¶œ Â· íŒŒì¼ ì´ë¦„ ì¼ê´„ ë³€ê²½" />
    <meta
      property="og:description"
      content="ì´ë¯¸ì§€ì—ì„œ ê¸€ì ë³µì‚¬, ì—¬ëŸ¬ íŒŒì¼ ì´ë¦„ì„ í•œ ë²ˆì— ë³€ê²½í•˜ì„¸ìš”."
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0b1220/ffffff&text=OCR+%26+Rename"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

    <style>
      body {
        background: #0b1220;
        color: white;
      }
      .tab-active {
        background: #22c55e;
        color: #0b1220;
      }
    </style>
  </head>

  <body class="max-w-4xl mx-auto px-4 py-10">
    <h1 class="text-3xl font-extrabold mb-6">
      ğŸ“¸ ì‚¬ì§„ ê¸€ì ì¶”ì¶œ & ğŸ“ íŒŒì¼ ì´ë¦„ ë³€ê²½
    </h1>

    <!-- Tabs -->
    <div class="flex gap-2 mb-6">
      <button id="tabOcr" class="px-4 py-2 rounded tab-active">
        ì´ë¯¸ì§€ â†’ í…ìŠ¤íŠ¸
      </button>
      <button id="tabRename" class="px-4 py-2 rounded bg-white/10">
        íŒŒì¼ ì´ë¦„ ë³€ê²½
      </button>
    </div>

    <!-- OCR -->
    <section id="ocrSection">
      <div class="bg-white/5 border border-white/10 rounded-xl p-4">
        <input type="file" id="ocrInput" accept="image/*" />
        <button
          id="ocrBtn"
          class="mt-3 px-4 py-2 rounded bg-green-500 text-black font-semibold"
        >
          í…ìŠ¤íŠ¸ ì¶”ì¶œ
        </button>

        <div id="ocrStatus" class="text-sm text-white/70 mt-3"></div>

        <textarea
          id="ocrResult"
          class="w-full h-40 mt-4 p-3 bg-black/30 border border-white/10 rounded"
          placeholder="ì¶”ì¶œëœ í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤"
        ></textarea>

        <button onclick="copyText()" class="mt-2 px-3 py-1 rounded bg-white/10">
          ğŸ“‹ ë³µì‚¬
        </button>
      </div>
    </section>

    <!-- Rename -->
    <section id="renameSection" class="hidden">
      <div class="bg-white/5 border border-white/10 rounded-xl p-4 space-y-4">
        <input type="file" id="renameInput" multiple />

        <select
          id="rule"
          class="w-full p-2 rounded bg-black/30 border border-white/10"
        >
          <option value="date">ë‚ ì§œ_ë²ˆí˜¸</option>
          <option value="prefix">Prefix_ë²ˆí˜¸</option>
          <option value="number">ë²ˆí˜¸ë§Œ</option>
        </select>

        <input
          id="prefixInput"
          placeholder="prefix ì…ë ¥ (ì˜µì…˜)"
          class="w-full p-2 rounded bg-black/30 border border-white/10"
        />

        <ul id="preview" class="text-sm text-white/70"></ul>

        <button
          id="zipBtn"
          class="px-4 py-2 rounded bg-green-500 text-black font-semibold"
        >
          ZIP ë‹¤ìš´ë¡œë“œ
        </button>
      </div>
    </section>

    <script>
      /* Tabs */
      const tabOcr = document.getElementById("tabOcr");
      const tabRename = document.getElementById("tabRename");
      const ocrSection = document.getElementById("ocrSection");
      const renameSection = document.getElementById("renameSection");

      tabOcr.onclick = () => {
        tabOcr.classList.add("tab-active");
        tabRename.classList.remove("tab-active");
        ocrSection.classList.remove("hidden");
        renameSection.classList.add("hidden");
      };
      tabRename.onclick = () => {
        tabRename.classList.add("tab-active");
        tabOcr.classList.remove("tab-active");
        renameSection.classList.remove("hidden");
        ocrSection.classList.add("hidden");
      };

      /* OCR */
      document.getElementById("ocrBtn").onclick = async () => {
        const file = document.getElementById("ocrInput").files[0];
        if (!file) return alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”");

        const status = document.getElementById("ocrStatus");
        status.textContent = "ê¸€ì ì½ëŠ” ì¤‘...";

        const { data } = await Tesseract.recognize(file, "kor+eng");
        document.getElementById("ocrResult").value = data.text;
        status.textContent = "ì™„ë£Œ!";
      };

      function copyText() {
        const ta = document.getElementById("ocrResult");
        ta.select();
        document.execCommand("copy");
        alert("ë³µì‚¬ë¨");
      }

      /* Rename */
      document.getElementById("renameInput").onchange = previewNames;
      document.getElementById("rule").onchange = previewNames;
      document.getElementById("prefixInput").oninput = previewNames;

      function previewNames() {
        const files = [...document.getElementById("renameInput").files];
        const rule = document.getElementById("rule").value;
        const prefix = document.getElementById("prefixInput").value;
        const ul = document.getElementById("preview");
        ul.innerHTML = "";

        files.forEach((f, i) => {
          const ext = f.name.split(".").pop();
          let name = "";

          if (rule === "date") {
            const d = new Date().toISOString().slice(0, 10);
            name = `${d}_${String(i + 1).padStart(2, "0")}.${ext}`;
          } else if (rule === "prefix") {
            name = `${prefix || "file"}_${String(i + 1).padStart(
              2,
              "0"
            )}.${ext}`;
          } else {
            name = `${String(i + 1).padStart(2, "0")}.${ext}`;
          }

          ul.innerHTML += `<li>${f.name} â†’ <b>${name}</b></li>`;
        });
      }

      document.getElementById("zipBtn").onclick = async () => {
        const files = [...document.getElementById("renameInput").files];
        if (!files.length) return alert("íŒŒì¼ ì—†ìŒ");

        const zip = new JSZip();
        const rule = document.getElementById("rule").value;
        const prefix = document.getElementById("prefixInput").value;

        for (let i = 0; i < files.length; i++) {
          const f = files[i];
          const ext = f.name.split(".").pop();
          let name = "";

          if (rule === "date") {
            const d = new Date().toISOString().slice(0, 10);
            name = `${d}_${String(i + 1).padStart(2, "0")}.${ext}`;
          } else if (rule === "prefix") {
            name = `${prefix || "file"}_${String(i + 1).padStart(
              2,
              "0"
            )}.${ext}`;
          } else {
            name = `${String(i + 1).padStart(2, "0")}.${ext}`;
          }

          zip.file(name, f);
        }

        const blob = await zip.generateAsync({ type: "blob" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "renamed_files.zip";
        a.click();
      };
    </script>
  </body>
</html>
